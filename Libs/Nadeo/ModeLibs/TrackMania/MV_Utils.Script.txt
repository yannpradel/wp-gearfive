/** 
 *	Utils functions for ManiaView
 */
#Const Version		"2022-09-30"
#Const ScriptName	"Libs/Nadeo/ModeLibs/TrackMania/MV_Utils.Script.txt"

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// Libraries
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
#Include "TextLib" as TL

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// Functions
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
CSmPlayer GetOwner(CSmMlScriptIngame _Context) {
	if (GUIPlayer != Null) return _Context.GUIPlayer;
	return _Context.InputPlayer;
}

// @DEPRECATED Use the function in `Libs/Nadeo/MenuLibs/Common/Components/Tools.Script.txt` instead
// Use to get only the suffix without the rank
Text GetRankSuffix(Integer _Rank) {
	if (_Rank <= 0) return "";
	declare Text Rank = TL::ToText(_Rank);
	declare Text Suffix = TL::FormatRank(_Rank, False);

	if (TL::Find(Rank, Suffix, False, False)) {
		Suffix = TL::Replace(Suffix, Rank, "");
		return Suffix;
	}

	return "";
}

// Use to re scale UI modules in splitscreen
Void AutoScaleSplitScreen(CMlFrame _Frame_Global, Real _VerticalScale, Real _HorizontalScale) {
	declare CTitleControl::ESplitScreenLayout SplitScreenLayout for System = CTitleControl::ESplitScreenLayout::Horizontal;
	if (SplitScreenLayout == CTitleControl::ESplitScreenLayout::Vertical) { 
		_Frame_Global.RelativeScale = _VerticalScale;
	} else if (SplitScreenLayout == CTitleControl::ESplitScreenLayout::Horizontal) { 
		_Frame_Global.RelativeScale = _HorizontalScale;
	} else if (SplitScreenLayout == CTitleControl::ESplitScreenLayout::Four) { 
		_Frame_Global.RelativeScale = 0.5;
	}
}