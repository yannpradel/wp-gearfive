/**
 * Sound library
 */
#Const Version		"1.0.0"
#Const ScriptName	"Sound.Script.txt"

#Include "Libs/Nadeo/TMEditor/GamepadTrackEditor/Legacy/Volumes.Script.txt" as Volumes

/// Sounds for each environment
#Const C_Sounds_All [
	"EditorAutoFinish"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/RaceWooshEnd.wav",
	"EditorBlockHelp"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuDialogDisplayed.wav",
	"EditorBlockMove"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorMoveElement.wav",
	"EditorBlockMoveDown"				=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorMoveElement.wav",
	"EditorBlockMoveUp"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorMoveElement.wav",
	"EditorBlockRotate"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorRotateElement.wav",
	"EditorBlockSelection"				=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuSelection.wav",
	"EditorDisplayUI"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuDialogDisplayed.wav",
	"EditorPlaceBlockCheckpoint"		=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElement.wav",
	"EditorPlaceBlockCommon"			=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElement.wav",
	"EditorPlaceBlockDeco"				=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElement.wav",
	"EditorPlaceBlockFinish"			=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElement.wav",
	"EditorPlaceBlockStart"				=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElement.wav",
	"EditorPopUp"						=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuDialogDisplayed.wav",
	"EditorRandomGenerationFinished"	=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/RdmGen_Finished.ogg",
	"EditorRemoveBlock"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorRemoveElement.wav",
	"EditorSimpleSelectMacroblock"		=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuSelection2.wav",
	"EditorSimpleSelectFamily"			=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuSelection3.wav",
	"EditorTestStart"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/RaceWooshStart.wav",
	"EditorValidationStop"				=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/RaceWooshEnd.wav",
	"EditorWrongAction"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/EditorPlaceElementError.wav",
	"EditorMenuMove"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuSelection.wav",
	"EditorMenuCancel"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuDialogHidden.wav",
	"EditorMenuValid"					=> "file://Media/Manialinks/Nadeo/TMEditor/GamepadTrackEditor/Sounds/MenuValid.wav"
]

declare CAudioSource[Text] G_Sounds;	///< Editor sounds
declare Boolean G_EnableSound;

Text GetScriptVersion() { return Version; }
Text GetScriptName() { return ScriptName; }

//  Play a sound from the library
Void Play(Text _Name) {
	if (!G_EnableSound) return;

	declare CAudioSource Sound;
	if (G_Sounds.existskey(_Name)) Sound <=> G_Sounds[_Name];
	if (Sound == Null) return;

	Sound.Stop();
	Sound.Play();
}

// Unload the library
Void Unload() {
	foreach (Sound in G_Sounds) {
		Audio.DestroySound(Sound);
	}
	G_Sounds.clear();
}

// Load the library
Void Load(Boolean _EnableSound) {
	Unload();

	G_EnableSound = _EnableSound;

	if (!G_EnableSound) return;

	// Load global sounds
	foreach (SoundName => SoundFile in C_Sounds_All) {
		declare Sound = Audio.CreateSound(
			SoundFile,
			Volumes::GetVolumedB(SoundName),
			False,
			False,
			False
		);
		Sound.PanRadiusLfe = Volumes::GetPanRadiusLfe("MenuUISpreadLarge");
		G_Sounds[SoundName] = Sound;

		yield(2);
	}
}