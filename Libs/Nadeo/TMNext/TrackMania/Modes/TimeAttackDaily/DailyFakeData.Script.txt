#Include "TimeLib" as TimeLib
#Include "TextLib" as TL

Text DailyCup(Integer _Duration) {
	declare Integer Challenge_StartDate = TL::ToInteger(TimeLib::GetCurrent()) + 5;
	declare Integer MatchesGenerationDate = Challenge_StartDate + _Duration + 330;
	return """{
	"id": 6,
	"competition": {
		"id": 6,
		"name": "Dev Daily Cup",
		"description": null,
		"registration_start": null,
		"registration_end": null,
		"start_date": 1582795348,
		"end_date": 1582796548,
		"matches_generation_date": {{{MatchesGenerationDate}}},
		"nb_players": 0,
		"participant_type": "PLAY",
		"spot_structure": "{\"version\":1,\"rounds\":[{\"match_generator_type\":\"daily_cup\",\"match_generator_data\":{\"match_size\":4}}]}",
		"leaderboard_id": 46,
		"manialink": null,
		"deleted_on": null
	},
	"challenge": {
		"id": 10,
		"name": "Dev Daily Cup - Challenge",
		"score_direction": "ASC",
		"start_date": {{{Challenge_StartDate}}},
		"end_date": 1582795348,
		"game_settings": {
			"gameinfos": {
				"game_mode": null,
				"chat_time": null,
				"finishtimeout": null,
				"allwarmupduration": null,
				"disablerespawn": null,
				"forceshowallopponents": null,
				"script_name": null
			},
			"filter": {
				"is_lan": null,
				"is_internet": null,
				"is_solo": null,
				"is_hotseat": null,
				"sort_index": null,
				"random_map_order": null
			},
			"script_settings": [],
			"startindex": null,
			"maps": [
				{
					"file": null,
					"ident": "GRyvAbIz6L43gPMu0nrt_Q2Lrud"
				}
			]
		},
		"dedicated_cfg": {
			"authorization_levels": [],
			"masterserver_account": {
				"login": null,
				"password": null,
				"validation_key": null
			},
			"server_options": {
				"name": null,
				"comment": null,
				"hide_server": null,
				"max_players": null,
				"password": null,
				"max_spectators": null,
				"password_spectator": null,
				"keep_player_slots": null,
				"ladder_mode": null,
				"ladder_serverlimit_min": null,
				"ladder_serverlimit_max": null,
				"enable_p2p_upload": null,
				"enable_p2p_download": null,
				"callvote_timeout": null,
				"callvote_ratio": null,
				"callvote_ratios": [],
				"allow_map_download": null,
				"autosave_replays": null,
				"autosave_validation_replays": null,
				"referee_password": null,
				"referee_validation_mode": null,
				"use_changing_validation_seed": null,
				"disable_horns": null,
				"clientinputs_maxlatency": null,
				"server_plugin": null,
				"server_plugin_settings": []
			},
			"system_config": {
				"connection_uploadrate": 80000,
				"connection_downloadrate": 80000,
				"allow_spectator_relays": null,
				"p2p_cache_size": null,
				"force_ip_address": null,
				"server_port": null,
				"server_p2p_port": null,
				"client_port": null,
				"bind_ip_address": null,
				"use_nat_upnp": null,
				"gsp_name": null,
				"gsp_url": null,
				"xmlrpc_port": null,
				"xmlrpc_allowremote": null,
				"scriptcloud_source": null,
				"blacklist_url": null,
				"guestlist_filename": null,
				"blacklist_filename": null,
				"title": null,
				"minimum_client_build": null,
				"disable_coherence_checks": null,
				"disable_replay_recording": null,
				"use_proxy": null,
				"proxy_login": null,
				"proxy_password": null
			}
		},
		"status": "INIT",
		"results_visibility": "PUBLIC",
		"creator": "05e560fc-09ff-4cdd-9591-4db38a31c523",
		"admins": [
			"f85883d3-263f-4c2b-9705-027368d098f1"
		],
		"nb_servers": 0,
		"leaderboard_id": 43,
		"deleted_on": null
	},
	"start_date": {{{Challenge_StartDate}}},
	"end_date": 1582796548
}""";
}